---
import type { GetStaticPaths } from "astro";
import { getCollection, getEntry } from "astro:content";
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";
import Button from "../../components/Button.astro";
import ButtonGroup from "../../components/ButtonGroup.astro";
import slugify from "../../helpers/slugify";
export const getStaticPaths = async () => {
  const allPeople = await getCollection("people");
  return allPeople.map((item) => ({
    params: { slug: item.id },
  }));
};
const slug = Astro.params.slug;
const entry = await getEntry("people", slug);
if (!entry) {
  throw new Error(`Person not found for slug: ${slug}`);
}
---

<Layout>
  <Image class="bio-image" src={entry.data.headshot} alt={entry.data.name} />
  <h1 class="star-after">{entry.data.name}</h1>
  <p>
    <span class="visually-hidden">Pronouns:</span>
    <span class="star-before">{entry.data.pronouns}</span>
  </p>
  <p>
    <span class="visually-hidden">Hometown:</span>
    <span class="star-before">{entry.data.location}</span>
  </p>
  <p>{entry.data.bio}</p>

  <ButtonGroup>
    <Button href={"/projects/" + slugify(entry.data.title)} color="accent-a"
      ><span class="star-after">Thesis Project</span></Button
    >
    <Button href={entry.data.portfolio} color="accent-c"
      ><span class="star-after">Portfolio Website</span></Button
    >
  </ButtonGroup>
</Layout>

<style></style>
